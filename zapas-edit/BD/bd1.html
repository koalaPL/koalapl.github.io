Baza danych to obiekt, który składa się z tabel. <br>
Tabela zbudowana jest krotek czyli kolumn oraz atrybutów czyli wierszy. <br>
Krotki określają cechy obiektów przechowywanych w wierszach. <br>
Wiersz to szereg wartości odpowiadających cechom w krotkach tabeli. <br>
<br>
No dobrze, regułka została odbębniona to teraz włączmy myślenie. <br>
<br>
W pewnej Europejskiej miejscowości urząd miasta postanowił wybudować publiczną bibliotekę dla jego mieszkańców.
Budynek już stoi, książki czekają na pułkach. Lecz biblioteka nie może rozpocząć leganie pracy. <br>
Ponieważ budynek i zbiór literatury został częściowo sfinansowany z grantu technologiczno-informatycznego. <br>
Aby ten wymóg zosytał spełniony poproszono nas o zaprojektowanie i wdrożenie systemu bazodanowego dla biblioteki. <br>
<br>
<br>
Zastanówmy sie jak tego dokonamy. <br>
Wiemy że promotorem całego przedsięwzięcia jest urząd miasta i robi to dla swoich mieszkańców. <br>
Wiec mamy dostęp do listy mieszkańców. System będzie budowany dla biblioteki wiec mamy też informacje o
książkach. Miejscowość znajduje się w Europie wiec będziemy musieli przestrzegać RODO. <br>
Biblioteka potrzebuje też informacji kto i od kiedy posiad dany legendarz aby w razie przekroczenia terminu oddania
wystawić mu karę. <br>
Dodatkowo informacja o wypożyczonych książkach zaoszczędzi niepotrzebny czas na szukanie czegoś co nie ma na stanie.
<br>
<br>
Czas na zdefiniowanie struktury tabeli mieszkańcy. <br>
Oto lista przykładowych danych uzyskanych do urzędu miasta: <br>


<ol type="I">
  <li>Imię Nazwisko</li>
  <li>Płeć</li>
  <li>Adres zamieszkania</li>
  <li>Status cywilny</li>
  <li>Data narodzin</li>
  <li>Dochód roczny</li>
  <li>Status majątkowy gospodarstwa</li>
</ol>
<br>
Chojny ten urząd miasta. Ale czy w bibliotece potrzebujemy tak wielu informacji? <br>
Otóż nie. Dla prawidłowego działania biblioteki wystarczy nam Imię, Nazwisko oraz adres zamieszkania by w razie co
wystawić karę dla delikwenta który nie oddał książki w terminie. <br>
Przykładowa tabela będzie wyglądać tak:
<br>
<br>
<h3>Mieszkańcy</h3>
<table>
  <tr>
    <td>Imię</td>
    <td>Nazwisko</td>
    <td>Adres</td>
  </tr>
  <tr>
    <td>Marcin</td>
    <td>Bąk</td>
    <td>Polna 37</td>
  </tr>
  <tr>
    <td>Jan</td>
    <td>Kowalski</td>
    <td>Miodowa 13</td>
  </tr>
  <tr>
    <td>Anna</td>
    <td>Nowak</td>
    <td>Miodowa 13</td>
  </tr>
  <tr>
    <td>Izabela</td>
    <td>Łęcka</td>
    <td>Krucza 9</td>
  </tr>
</table>
<br>
Skoro mamy już bazę mieszkańców zajmijmy się książkami. <br>
Otóż nic bardziej mylnego. <br>
Pozostawienie tabeli w takim stanie i wpisywanie kilku set atrybutów spowoduje że w przypadku chęci dodania nowej krotki,
trzeba Bedzie zmodyfikować kilka set rekordów tabeli. <br>
Zadaj sobie pytania z serii "a co jeżeli?". Oto przykładowe pytania:<br>
- Pojawią się osoby z innych miast chcących wypożyczyć książkę? <br>
- Imię i nazwisko może się powtórzyć. To samo z ulicą i numerem domu / mieszkania. <br>
- Kto wtedy wypożyczył książkę? <br>
- Komu wystawić karę za nie terminowy zwrot? <br>
<br>
Odpowiedzią na pierwsze pytanie będzie dodanie miasta do adresu. <br>
Na kolejne pytania odpowiedzią będzie <b>"Spójność danych"</b> czyli zastosowanie w tabeli krotki przeznaczonej do
niepowtarzalnych danych. <br>
Takimi danymi może być nr PESEL. może ona w pełni zastąpić krotkę ID. Gdyż każdy ma swoje indywidualne 11 cyfr. <br>
Dla uproszczenia zastosujemy id ( skrót od identification / identyfikacja).
Dodatkowo zmieńmy nazwę tabeli aby opisywała faktyczny stan zbioru informacji.
<br>
<br>
<h3>Klienci biblioteki</h3>
<table>
  <tr>
    <td>Identyfikator</td>
    <td>Imię</td>
    <td>Nazwisko</td>
    <td>Adres</td>
  </tr>
  <tr>
    <td>0</td>
    <td>Marcin</td>
    <td>Bąk</td>
    <td>Polna 37 Gdańsk</td>
  </tr>
  <tr>
    <td>1</td>
    <td>Jan</td>
    <td>Kowalski</td>
    <td>Miodowa 13 Gdańsk</td>
  </tr>
  <tr>
    <td>2</td>
    <td>Anna</td>
    <td>Nowak</td>
    <td>Miodowa 13 Gdańsk</td>
  </tr>
  <tr>
    <td>3</td>
    <td>Izabela</td>
    <td>Łęcka</td>
    <td>Krucza 9 Kraków</td>
  </tr>
</table>
<br>


<br>
<br>
<h3>Repertuar księgarni</h3>
<br>
<table>
  <tr>
    <td>Identyfikator</td>
    <td>Autor</td>
    <td>Tytuł</td>
    <td>Data wydania</td>
  </tr>
  <tr>
    <td>0</td>
    <td>George Orwell</td>
    <td>Rok 1984</td>
    <td>1949</td>
  </tr>
  <tr>
    <td>1</td>
    <td>Stephen Hawking</td>
    <td>Krótka historia czasu</td>
    <td>2022-02-22</td>
  </tr>
  <tr>
    <td>2</td>
    <td>Dave Eggers</td>
    <td>Wstrząsające dzieło kulejącego geniusza</td>
    <td>2017-06-07</td>
  </tr>
  <tr>
    <td>3</td>
    <td>Ishmael Beah</td>
    <td>Było minęło. Wspomnienia dziecka-żołnierza</td>
    <td>04.2008</td>
  </tr>
  <tr>
    <td>4</td>
    <td>George Orwell</td>
    <td>Rok 1984</td>
    <td>1949</td>
  </tr>
  <tr>
    <td>5</td>
    <td>Stephen Hawking</td>
    <td>Krótka historia czasu</td>
    <td>2022-02-22</td>
  </tr>
</table>
<br>
Posiadamy już dwie główne tabele naszej biblioteki. <br>
<em>(Dostaliśmy informację że klienci spoza miejscowości powinni mieć krótszy czas na oddanie książki).</em> <br>
Uwzględnimy to w dalszych etapach. <br>
<br>
Czas na normalizację, są trzy etapy a dokładniej cztery. <br>
<h4>Pierwsza postać normalna</h4>
<i>Wszystkie elementy są autonomiczne i żadne wiersze się nie powtarzają.</i>
<br>
Ta postać normalna została przez nas częściowo zastosowana dzięki dodaniu identyfikatora. <br>
Lecz nie w pełni... <br>
Skoro rodzimi mieszkańcy miejscowości mają swoisty bonus czasowy na przyswojenie lektury, to trzeba zmodyfikować tabelę
klienci biblioteki. <br>
Utwórzmy wiec dwie tabele "Mieszkańcy" oraz "Przyjezdni". Uwzględniając pierwszą postać normalną.
Dzięki podziel klientów na dwie grupy uniknęliśmy przymusu stworzenia dodatkowej krotki definiującej przynależność do
miejscowości.
<br>
Kontynuując normalizację zauważ bezsensowność krotki "Aderes". <br>
Posiadamy w niej wiele informacji składowych ulicę, numer domu oraz miejscowość. <br>
Skoro krotka zawiera w sobie wiele istotnych informacji należy ją rozdzielić na części składowe. <br>
<br>
Oto wynik pierwszej normalizacji tabeli "Klienci biblioteki":
<br>
<br>
<h3>Mieszkańcy</h3>
<table>
  <tr>
    <td>Identyfikator</td>
    <td>Imię</td>
    <td>Nazwisko</td>
    <td>Ulica</td>
    <td>Numer domu</td>
    <td>Miejscowość</td>
  </tr>
  <tr>
    <td>0</td>
    <td>Marcin</td>
    <td>Bąk</td>
    <td>Polna</td>
    <td>37</td>
    <td> Gdańsk</td>
  </tr>
  <tr>
    <td>1</td>
    <td>Jan</td>
    <td>Kowalski</td>
    <td>Miodowa</td>
    <td>13</td>
    <td>Gdańsk</td>
  </tr>
  <tr>
    <td>2</td>
    <td>Anna</td>
    <td>Nowak</td>
    <td>Miodowa</td>
    <td> 13 </td>
    <td>Gdańsk</td>
  </tr>
  <tr>
    <td>3</td>
    <td>Izabela</td>
    <td>Łęcka</td>
    <td>Krucza</td>
    <td> 9</td>
    <td>Kraków</td>
  </tr>
</table>
<br>
<br>
<h3>Przyjezdni</h3>
<table>
  <tr>
    <td>Identyfikator</td>
    <td>Imię</td>
    <td>Nazwisko</td>
    <td>Ulica</td>
    <td>Numer domu</td>
    <td>Miejscowość</td>
  </tr>
  <tr>
    <td>0</td>
    <td>Albert</td>
    <td>Rak</td>
    <td>Polna</td>
    <td>81</td>
    <td> Warszawa</td>
  </tr>
  <tr>
    <td>1</td>
    <td>Jan</td>
    <td>Nowak</td>
    <td>Grunwaldzka</td>
    <td>34</td>
    <td>Warszawa</td>
  </tr>
  <tr>
    <td>2</td>
    <td>Katarzyna</td>
    <td>Wilka</td>
    <td>Karczmia</td>
    <td> 12 </td>
    <td>Poznań</td>
  </tr>
</table>
<br>
<h3>Podsumowanie zasad pierwszej postaci normalnej</h3>
- Wyeliminuj powtarzające się grupy w poszczególnych tabelach. <br>
- Utwórz osobną tabelę dla każdego zestawu powiązanych danych. <br>
- Zidentyfikuj każdy zestaw powiązanych danych za pomocą klucza podstawowego (Primary key / Klucz główny). <br>
<br>
<h4>Druga postać normalna</h4>
<i>Zawiera w sobie pierwszą postać normalną oraz wymusza separację danych nie będących kluczowymi dla tabeli oraz
  powiązanymi z atrybutami inych tabel.</i> <br>
Zaóważ że mieszkanicy oraz przyjezdni mają w sobie adres który mógłby być oddzielną tabelą. <br>
W naszym przykładzie biblioteki możesz nie widzieć sensu takiego działania ale wyobraź sobie dział rachunkowości w
jakiejś firmie. <br>
Adres klienta jest potrzebny w tabeli klienci, zamówienia, faktury, wysyłka oraz serwis urządzeń niezdatnych do
transportu. <br>
<br>
Po zastosowaniu podziału na trzy tabele trzeba przywrócić integralność danych. <br>
Tu z pomocą przychodzi nam klucz obcy (Foreign key) zalokowany w tabelach Mieszkańcy oraz Przyjezdni, powiązany z
numerem identyfikacyjnym z tabeli Adresy. <br>

<br>
<br>
<h3>Adresy</h3>
<table>
  <tr>
    <td>Identyfikator</td>
    <td>Ulica</td>
    <td>Numer domu</td>
    <td>Miejscowość</td>
  </tr>
  <tr>
    <td>0</td>
    <td>Polna</td>
    <td>37</td>
    <td> Gdańsk</td>
  </tr>
  <tr>
    <td>1</td>
    <td>Polna</td>
    <td>81</td>
    <td> Warszawa</td>
  </tr>
  <tr>
    <td>2</td>
    <td>Miodowa</td>
    <td>13</td>
    <td>Gdańsk</td>
  </tr>
  <tr>
    <td>3</td>
    <td>Karczmia</td>
    <td> 12 </td>
    <td>Poznań</td>
  </tr>
  <tr>
    <td>4</td>
    <td>Krucza</td>
    <td> 9</td>
    <td>Kraków</td>
  </tr>

  <tr>
    <td>5</td>
    <td>Grunwaldzka</td>
    <td>34</td>
    <td>Warszawa</td>
  </tr>

</table>
<br>
<h3>Mieszkańcy</h3>
<table>
  <tr>
    <td>Identyfikator</td>
    <td>Imię</td>
    <td>Nazwisko</td>
    <td>Identyfikator adresu</td>
  </tr>
  <tr>
    <td>0</td>
    <td>Marcin</td>
    <td>Bąk</td>
    <td>0</td>
  </tr>
  <tr>
    <td>1</td>
    <td>Jan</td>
    <td>Kowalski</td>
    <td>2</td>
  </tr>
  <tr>
    <td>2</td>
    <td>Anna</td>
    <td>Nowak</td>
    <td>2</td>
  </tr>
  <tr>
    <td>3</td>
    <td>Izabela</td>
    <td>Łęcka</td>
    <td>5</td>
  </tr>
</table>
<br>
<br>
<h3>Przyjezdni</h3>
<table>
  <tr>
    <td>Identyfikator</td>
    <td>Imię</td>
    <td>Nazwisko</td>
    <td>Identyfikator adresu</td>
  </tr>
  <tr>
    <td>0</td>
    <td>Albert</td>
    <td>Rak</td>
    <td>1</td>
  </tr>
  <tr>
    <td>1</td>
    <td>Jan</td>
    <td>Nowak</td>
    <td>6</td>
  </tr>
  <tr>
    <td>2</td>
    <td>Katarzyna</td>
    <td>Wilka</td>
    <td>3</td>
  </tr>
</table>
<br>
<br>
<h3>Podsumowanie zasad drugiej postaci normalnej</h3>
- Utwórz osobne tabele dla zestawów wartości dotyczących wielu rekordów. <br>
- Powiąż te tabele za pomocą klucza obcego (Foreign key). <br>
<br>
<h4>Trzecia postać normalna</h4>
<i>Zawiera w sobie pozostałe postaci normalne oraz wprowadza zasadę, że wszystkie atrybuty niekluczowe są bezpośrednio
  zależne od klucza podstawowego </i>
<br>
Aktualna struktura tabel z informacjami o klientach uwzględnia tą postać normalną,
ponieważ chcąc uzyskać klientów będących mieszkańcami tej miejscowości którzy skorzystali już z biblioteki,
będzie bezproblemowa. Ponieważ te dane są zależne od klucza adresu.
<br>
<h3>Podsumowanie zasad trzeciej postaci normalnej</h3>
- Wyeliminuj pola, które nie zależą od klucza.
<br>
Uwzględnienie tych trzech postaci normalnych jest wymagane do utworzenia poprawnej struktury tabel bazy danych. <br>
Istnieją jeszcze dwie kolejne postacie które nie są wymagane a niektóre struktury danych nawet nie umożliwią ich
zastosowanie. <br>
Dla lepszego zobrazowania ich porzućmy plan biblioteki i weźmy prostą tabelę "Olimpiada". <br>
<br>
<h3>Olimpiada</h3>
<br>
<table>
  <tr>
    <td>ID.</td>
    <td>PESEL< może ona w pełni zastąpić krotkę ID./td>
    <td>Imię</td>
    <td>Nazwisko</td>
    <td>Dyscyplina</td>
    <td>Język</td>
  </tr>
  <tr>
    <td>1</td>
    <td>91627386512</td>
    <td>Artur</td>
    <td>Bonaparte</td>
    <td>Beig na 100m</td>
    <td>Francuski</td>
  </tr>
  <tr>
    <td>2</td>
    <td>97645328791</td>
    <td>Mateusz</td>
    <td>Kowalski</td>
    <td>Skok w dal</td>
    <td>Polski</td>
  </tr>
  <tr>
    <td>3</td>
    <td>91627386512</td>
    <td>Severin</td>
    <td>Freund</td>
    <td>Skok w dal</td>
    <td>Niemiecki</td>
  </tr>
  <tr>
    <td>4</td>
    <td>97645328791</td>
    <td>Mateusz</td>
    <td>Kowalski</td>
    <td>Beig na 100m</td>
    <td>Polski</td>
  </tr>
  <tr>
    <td>5</td>
    <td>92345678901</td>
    <td>Severin</td>
    <td>Freund</td>
    <td>Beig na 100m</td>
    <td>Niemiecki</td>
  </tr>
</table>
<br>
<h4>Czwarta postać normalna</h4>
<i>Zawiera w sobie trzecią zasadę normalizacji, oraz tabela nie może zawierać zależności wielowartościowych.</i> <br>
Powyższa tabela nie spełnia trzech pierwszych postaci normalnych. Widać w niej także redundancje czyli nadmiarowość.
<br>
Wielowartościowość tej tabeli sprawia że przypisujemy zależność pomiędzy znajomością języka a dyscypliną.
<br>
Najprawdopodobniej wykorzystanie trzech postaci normalnych zniweluje wszelkie problemy z tą tabelą. <br>
Ponieważ rozwiązaniem wielowartościowości jest dekompozycja całości na dwie trzy tabele Zawodnicy, Dyscypliny, Języki.
<br>
<br>
W tabeli ukazał się tak zwany <b>klucz kandydujący</b>. Czy jesteś w stanie go wskazać? <br> <br>
Mianowicie chodzi o krotkę "PESEL" może ona w pełni zastąpić krotkę ID. <br>
Dlatego nazwiemy ją kluczem kandydującym do bycia kluczem podstawowym / głównym.
<br>
<br>
<br>
